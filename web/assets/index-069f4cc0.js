import{g as k,r as p,bb as v,bk as w,bi as e,bA as N,bs as C,bt as S,bc as I,be as a,bf as t,bj as f,bg as b,bh as B,bI as $,bl as U,aI as j,by as M,bM as V,bD as K}from"./index-deb5fb78.js";import{c as P,j as T,h as A,e as i,_ as g}from"./index.vue_vue_type_script_setup_true_lang-0d668001.js";import{j as h}from"./Input-c71c80ca.js";const D=k({__name:"index",props:{src:null},emits:["click","refresh"],setup(x,{expose:m,emit:_}){const n=p("0");function u(){n.value=String(c(100,99999)),_("click")}function c(s,d){return Math.floor(Math.random()*(d-s))+s}return m({refresh(){u()}}),(s,d)=>(v(),w(e(P),{src:`${x.src}?${n.value}`,"preview-disabled":!0,onClick:u},null,8,["src"]))}}),F={class:"login-container"},R={class:"login-title"},z={class:"w-[120px] h-[34px] mr-[20px] rounded border flex cursor-pointer"},E=f("div",{class:"flex justify-center text-slate-300"},[b(" Powered By "),f("a",{href:"https://github.com/hslr-s/sun-panel",target:"_blank",class:"ml-[5px] text-slate-500"},"Sun-Panel")],-1),J=k({__name:"index",setup(x){const m=N(),_=C(),n=S(),u=p(!1),c=p(),s=p({username:"",password:""}),d=async()=>{const o=await V(s.value);m.updateUserInfo(o.data),o.code===0?(_.setToken(o.data.token),n.success(`Hi ${o.data.name}，欢迎回来!`),K.push({path:"/"})):c.value.refresh()};function y(){d()}return(o,r)=>(v(),I("div",F,[a(e(M),{class:"login-card",style:{"border-radius":"20px"}},{default:t(()=>[f("div",R,[a(e(T),{size:30,type:"success",class:"!font-bold"},{default:t(()=>[b(B(o.$t("common.appName")),1)]),_:1})]),a(e(A),{model:s.value,"label-width":"100px",onKeydown:$(y,["enter"])},{default:t(()=>[a(e(i),null,{default:t(()=>[a(e(h),{value:s.value.username,"onUpdate:value":r[0]||(r[0]=l=>s.value.username=l),placeholder:"请输入邮箱地址作为账号"},{prefix:t(()=>[a(e(g),{icon:"ph:user-bold"})]),_:1},8,["value"])]),_:1}),a(e(i),null,{default:t(()=>[a(e(h),{value:s.value.password,"onUpdate:value":r[1]||(r[1]=l=>s.value.password=l),type:"password",placeholder:"请输入密码"},{prefix:t(()=>[a(e(g),{icon:"mdi:password-outline"})]),_:1},8,["value"])]),_:1}),u.value?(v(),w(e(i),{key:0},{default:t(()=>[f("div",z,[a(e(D),{ref_key:"captchaRef",ref:c,src:"/api/captcha/getImage"},null,512)]),a(e(h),{value:s.value.vcode,"onUpdate:value":r[2]||(r[2]=l=>s.value.vcode=l),type:"text",placeholder:"请输入图像验证码"},null,8,["value"])]),_:1})):U("",!0),a(e(i),{style:{"margin-top":"10px"}},{default:t(()=>[a(e(j),{type:"primary",block:"",onClick:y},{default:t(()=>[b(" 登录 ")]),_:1})]),_:1}),E]),_:1},8,["model","onKeydown"])]),_:1})]))}});export{J as default};
